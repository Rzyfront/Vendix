# üìù Register Staff API Tests
# Archivo .http para VS Code REST Client o herramientas similares

@baseUrl = http://localhost:3000/api
@authToken = YOUR_JWT_TOKEN_HERE

### 1. Login para obtener token de Super Admin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "superadmin@vendix.com",
  "password": "password123",
  "organization_slug": "vendix-corp"
}

### 2. Registrar Staff - Manager
POST {{baseUrl}}/auth/register-staff
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "first_name": "Carlos",
  "last_name": "Rodriguez",
  "email": "carlos.rodriguez@vendix.com",
  "password": "password123",
  "role": "manager"
}

### 3. Registrar Staff - Supervisor
POST {{baseUrl}}/auth/register-staff
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "first_name": "Ana",
  "last_name": "Martinez",
  "email": "ana.martinez@vendix.com",
  "password": "password123",
  "role": "supervisor"
}

### 4. Registrar Staff - Employee
POST {{baseUrl}}/auth/register-staff
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "first_name": "Luis",
  "last_name": "Garcia",
  "email": "luis.garcia@vendix.com",
  "password": "password123",
  "role": "employee"
}

### 5. Registrar Staff con Tienda Asignada
POST {{baseUrl}}/auth/register-staff
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "first_name": "Maria",
  "last_name": "Lopez",
  "email": "maria.lopez@vendix.com",
  "password": "password123",
  "role": "employee",
  "store_id": 1
}

### 6. Intentar registrar con rol inv√°lido
POST {{baseUrl}}/auth/register-staff
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "first_name": "Test",
  "last_name": "User",
  "email": "test.user@vendix.com",
  "password": "password123",
  "role": "invalid_role"
}

### 7. Intentar registrar email duplicado
POST {{baseUrl}}/auth/register-staff
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "first_name": "Carlos",
  "last_name": "Rodriguez",
  "email": "carlos.rodriguez@vendix.com",
  "password": "password123",
  "role": "supervisor"
}

### 8. Intentar registrar sin permisos (usar token de usuario normal)
POST {{baseUrl}}/auth/register-staff
Authorization: Bearer normal_user_token_here
Content-Type: application/json

{
  "first_name": "Test",
  "last_name": "User",
  "email": "test.user@vendix.com",
  "password": "password123",
  "role": "employee"
}

### 9. Verificar usuario creado (usar endpoint de usuarios)
GET {{baseUrl}}/users
Authorization: Bearer {{authToken}}

### 10. Verificar sesiones del nuevo usuario
GET {{baseUrl}}/auth/sessions
Authorization: Bearer new_staff_token_here</content>
<parameter name="filePath">/home/rzydev/Vendix/apps/backend/doc/Auth/Register Staff/register-staff-tests.http
