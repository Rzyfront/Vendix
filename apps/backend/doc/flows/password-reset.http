# ðŸ”‘ PASSWORD RESET FLOW
# Flujo completo de recuperaciÃ³n de contraseÃ±a

@baseUrl = http://localhost:3001/api

###

# =================================================================
# ðŸ“§ STEP 1: PASSWORD RESET REQUEST
# =================================================================

### Request Password Reset
POST {{baseUrl}}/auth/password-recovery
Content-Type: application/json

{
  "email": "user@company.com",
  "organization_slug": "company-org"
}

# Response: Email sent successfully
# System sends email with reset token to user

# =================================================================
# ðŸ”— STEP 2: EMAIL LINK ACCESS
# =================================================================
# User clicks link in email which contains reset token

### Validate Reset Token (Frontend)
GET {{baseUrl}}/auth/validate-reset-token?token=RESET_TOKEN_HERE
Content-Type: application/json

# Response: Token valid or expired

# =================================================================
# ðŸ”’ STEP 3: PASSWORD RESET
# =================================================================

### Reset Password with Token
POST {{baseUrl}}/auth/reset-owner-password
Content-Type: application/json

{
  "token": "RESET_TOKEN_FROM_EMAIL",
  "new_password": "NewSecurePassword123!"
}

# =================================================================
# âœ… STEP 4: LOGIN WITH NEW PASSWORD
# =================================================================

### Login with New Password
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "user@company.com",
  "password": "NewSecurePassword123!",
  "organization_slug": "company-org"
}

# =================================================================
# ðŸš¨ SECURITY NOTES
# =================================================================
# - Reset tokens expire in 24 hours
# - One-time use only
# - Rate limited (3 requests per hour per email)
# - Audit logs for security monitoring
# - No plaintext passwords in logs
# - Secure token generation (crypto.randomBytes)
