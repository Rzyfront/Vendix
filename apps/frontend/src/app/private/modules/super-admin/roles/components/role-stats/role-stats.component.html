<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
  <!-- Total Roles -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
    <div class="flex items-center">
      <div class="p-3 bg-blue-100 dark:bg-blue-900 rounded-lg">
        <app-icon name="shield" class="w-6 h-6 text-blue-600 dark:text-blue-400"></app-icon>
      </div>
      <div class="ml-4">
        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Roles</p>
        <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{ totalRoles }}</p>
      </div>
    </div>
  </div>

  <!-- System Roles -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
    <div class="flex items-center">
      <div class="p-3 bg-amber-100 dark:bg-amber-900 rounded-lg">
        <app-icon name="shield-check" class="w-6 h-6 text-amber-600 dark:text-amber-400"></app-icon>
      </div>
      <div class="ml-4">
        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Roles del Sistema</p>
        <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{ systemRoles }}</p>
      </div>
    </div>
  </div>

  <!-- Custom Roles -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
    <div class="flex items-center">
      <div class="p-3 bg-green-100 dark:bg-green-900 rounded-lg">
        <app-icon name="users" class="w-6 h-6 text-green-600 dark:text-green-400"></app-icon>
      </div>
      <div class="ml-4">
        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Roles Personalizados</p>
        <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{ customRoles }}</p>
      </div>
    </div>
  </div>

  <!-- Total Users -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
    <div class="flex items-center">
      <div class="p-3 bg-purple-100 dark:bg-purple-900 rounded-lg">
        <app-icon name="user-check" class="w-6 h-6 text-purple-600 dark:text-purple-400"></app-icon>
      </div>
      <div class="ml-4">
        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Usuarios</p>
        <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{ totalUsers }}</p>
      </div>
    </div>
  </div>
</div>

<!-- Distribution Chart -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
    <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Distribución de Roles</h3>
    <div class="space-y-3">
      <div *ngFor="let item of getRoleDistribution()" class="flex items-center justify-between">
        <span class="text-sm text-gray-600 dark:text-gray-400">{{ item.name }}</span>
        <div class="flex items-center">
          <div class="w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mr-3">
            <div
              class="bg-blue-600 h-2 rounded-full"
              [style.width.%]="item.percentage">
            </div>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white">{{ item.percentage }}%</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Most Used Roles -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
    <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Roles Más Usados</h3>
    <div class="space-y-2">
      <div *ngFor="let role of getMostUsedRoles()" class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded">
        <span class="text-sm font-medium text-gray-900 dark:text-white">{{ role.name }}</span>
        <span class="text-sm text-gray-600 dark:text-gray-400">{{ role.users }} usuarios</span>
      </div>
      <div *ngIf="getMostUsedRoles().length === 0" class="text-center py-4">
        <p class="text-sm text-gray-500 dark:text-gray-400">No hay roles con usuarios asignados</p>
      </div>
    </div>
  </div>
</div>

<!-- Unused Roles Alert -->
<div *ngIf="getUnusedRoles().length > 0" class="bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4">
  <div class="flex">
    <app-icon name="alert-triangle" class="w-5 h-5 text-amber-600 dark:text-amber-400 mr-2"></app-icon>
    <div>
      <h3 class="text-sm font-medium text-amber-800 dark:text-amber-200">Roles sin Usar</h3>
      <p class="text-sm text-amber-700 dark:text-amber-300 mt-1">
        Hay {{ getUnusedRoles().length }} roles sin usuarios asignados. Considera eliminarlos o asignarles usuarios.
      </p>
    </div>
  </div>
</div>