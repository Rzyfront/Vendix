<div class="md:space-y-4">
  <!-- Lista de Órdenes -->
  <div class="md:bg-surface md:rounded-xl md:shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:border md:border-border md:min-h-[600px] md:overflow-hidden">
    <!-- Search Section: sticky below stats on mobile, normal on desktop -->
    <div class="sticky top-[99px] z-10 bg-background px-2 py-1.5 -mt-[5px] md:mt-0 md:static md:bg-transparent md:px-6 md:py-4 md:border-b md:border-border">
      <div class="flex flex-col gap-2 md:flex-row md:justify-between md:items-center md:gap-4">
        <!-- Title - smaller on mobile, larger on desktop -->
        <h2 class="text-[13px] font-bold text-gray-600 tracking-wide md:text-lg md:font-semibold md:text-text-primary">
          Órdenes ({{ totalItems }})
        </h2>

        <!-- Search row - horizontal on mobile -->
        <div class="flex items-center gap-2 w-full md:w-auto">
          <app-inputsearch
            class="flex-1 md:w-64 shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none rounded-[10px]"
            size="sm"
            placeholder="Buscar órdenes..."
            [debounceTime]="1000"
            [ngModel]="searchTerm"
            (ngModelChange)="onSearchChange($event)"
          ></app-inputsearch>

          <app-button
            variant="outline"
            size="sm"
            customClasses="w-9 h-9 !px-0 bg-surface shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none !rounded-[10px] shrink-0"
            (clicked)="create.emit()"
            title="Nueva Orden"
          >
            <app-icon slot="icon" name="plus" [size]="18"></app-icon>
          </app-button>

          <app-options-dropdown
            class="shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none rounded-[10px]"
            [filters]="filterConfigs"
            [filterValues]="filterValues"
            [actions]="dropdownActions"
            [isLoading]="loading"
            (filterChange)="onFilterChange($event)"
            (clearAllFilters)="clearFilters()"
            (actionClick)="onActionClick($event)"
          ></app-options-dropdown>
        </div>
      </div>
    </div>

    <!-- Estado de Carga -->
    <div *ngIf="loading" class="p-4 md:p-6 text-center">
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
      <p class="mt-2 text-text-secondary">Cargando órdenes...</p>
    </div>

    <!-- Estado Vacío -->
    <app-order-empty-state
      *ngIf="!loading && orders.length === 0"
      [title]="getEmptyStateTitle()"
      [description]="getEmptyStateDescription()"
      [showAdditionalActions]="hasFilters"
      (actionClick)="create.emit()"
      (refreshClick)="refresh.emit()"
      (clearFiltersClick)="clearFilters()"
    ></app-order-empty-state>

    <!-- Orders List -->
    <div *ngIf="!loading && orders.length > 0" class="px-2 pb-2 pt-3 md:p-4">
      <app-responsive-data-view
        [data]="orders"
        [columns]="columns"
        [actions]="actions"
        [cardConfig]="cardConfig"
        [loading]="loading"
        [sortable]="true"
        (sort)="onSort($event)"
        (rowClick)="handleViewOrder($event.id)"
      ></app-responsive-data-view>

      <!-- Pagination -->
      <app-pagination
        [currentPage]="filters.page || 1"
        [totalPages]="totalPages"
        [total]="totalItems"
        [limit]="filters.limit || 10"
        (pageChange)="onPageChange($event)"
      ></app-pagination>
    </div>
  </div>
</div>
