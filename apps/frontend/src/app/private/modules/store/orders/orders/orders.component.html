<div class="space-y-2 md:space-y-2 md:space-y-4">
  <!-- Tarjetas de Estadísticas -->
  <app-order-stats [stats]="orderStats"></app-order-stats>

  <!-- Lista de Órdenes -->
  <div
    class="bg-surface rounded-card shadow-card border border-border min-h-[600px]"
  >
    <div class="p-2 md:px-6 md:py-4 border-b border-border">
      <div
        class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 md:gap-4"
      >
        <div class="flex-1 min-w-0">
          <h2 class="text-lg font-semibold text-text-primary">
            Todas las Órdenes ({{ totalItems }})
          </h2>
        </div>

        <div
          class="flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full sm:w-auto"
        >
          <!-- Quick search input -->
          <app-inputsearch
            class="w-full sm:w-64 flex-shrink-0"
            size="sm"
            placeholder="Buscar órdenes..."
            [debounceTime]="1000"
            [(ngModel)]="searchTerm"
            (ngModelChange)="onSearchChange($event)"
          ></app-inputsearch>

          <!-- Filter dropdown -->
          <app-order-filter-dropdown
            [selectedStatus]="selectedStatus"
            [selectedPaymentStatus]="selectedPaymentStatus"
            [selectedDateRange]="selectedDateRange"
            [isLoading]="isLoading"
            (filterChange)="onFilterDropdownChange($event)"
            (clearAllFilters)="clearFilters()"
          ></app-order-filter-dropdown>

          <!-- Action buttons -->
          <div class="flex gap-2 items-center ml-auto">
            <app-button
              variant="outline"
              size="sm"
              (clicked)="refreshOrders()"
              [disabled]="isLoading"
              title="Actualizar"
            >
              <app-icon name="refresh" [size]="16" slot="icon"></app-icon>
            </app-button>
            
            <app-button
              variant="primary"
              size="sm"
              (clicked)="createNewOrder()"
              title="Nueva Orden"
            >
              <app-icon name="plus" [size]="16" slot="icon"></app-icon>
              <span class="hidden sm:inline">Nueva Orden</span>
            </app-button>
          </div>
        </div>
      </div>
    </div>

    <!-- Estado de Carga -->
    <div *ngIf="isLoading" class="p-2 md:p-2 md:p-4 text-center">
      <div
        class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"
      ></div>
      <p class="mt-2 text-text-secondary">Cargando órdenes...</p>
    </div>

    <!-- Estado Vacío -->
    <app-order-empty-state
      *ngIf="!isLoading && orders.length === 0"
      [title]="getEmptyStateTitle()"
      [description]="getEmptyStateDescription()"
      [showAdditionalActions]="hasFilters"
      [actionButtonText]="'Crear Primera Orden'"
      (actionClick)="createNewOrder()"
      (refreshClick)="refreshOrders()"
      (clearFiltersClick)="clearFilters()"
    >
    </app-order-empty-state>

    <!-- Tabla de Órdenes -->
    <div [hidden]="isLoading || orders.length === 0" class="p-2 md:p-2 md:p-4">
      <app-orders-list
        [filters]="filters"
        (viewOrder)="viewOrderDetails($event)"
        (ordersLoaded)="onOrdersLoaded($event)"
      ></app-orders-list>
    </div>
  </div>

  <!-- Order Details Modal -->
  <app-order-details
    [orderId]="selectedOrderId"
    [isVisible]="showOrderDetails"
    (close)="closeOrderDetails()"
    (orderUpdated)="onOrderUpdated($event)"
  ></app-order-details>
</div>
