<div class="md:space-y-4">
  <!-- Lista de Ajustes -->
  <div class="md:bg-surface md:rounded-xl md:shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:border md:border-border md:min-h-[600px] md:overflow-hidden">
    <!-- Search Section: sticky below stats on mobile, normal on desktop -->
    <div class="sticky top-[99px] z-10 bg-background px-2 py-1.5 -mt-[5px] md:mt-0 md:static md:bg-transparent md:px-6 md:py-4 md:border-b md:border-border">
      <div class="flex flex-col gap-2 md:flex-row md:justify-between md:items-center md:gap-4">
        <!-- Title - smaller on mobile, larger on desktop -->
        <h2 class="text-[13px] font-bold text-gray-600 tracking-wide md:text-lg md:font-semibold md:text-text-primary">
          Ajustes de Inventario ({{ adjustments().length }})
        </h2>

        <!-- Search row - horizontal on mobile -->
        <div class="flex items-center gap-2 w-full md:w-auto">
          <app-inputsearch
            class="flex-1 md:w-64 shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none rounded-[10px]"
            size="sm"
            placeholder="Buscar ajuste..."
            [debounceTime]="300"
            [ngModel]="searchTerm"
            (ngModelChange)="onSearchChange($event)">
          </app-inputsearch>

          <app-options-dropdown
            class="shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none rounded-[10px]"
            [filters]="filterConfigs"
            [filterValues]="filterValues"
            [actions]="dropdownActions"
            [isLoading]="isLoading()"
            (filterChange)="onFilterChange($event)"
            (clearAllFilters)="onClearFilters()"
            (actionClick)="onActionClick($event)">
          </app-options-dropdown>
        </div>
      </div>
    </div>

    <!-- Estado de Carga -->
    @if (isLoading()) {
      <div class="p-4 md:p-6 text-center">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
        <p class="mt-2 text-text-secondary">Cargando ajustes...</p>
      </div>
    }

    <!-- Estado VacÃ­o -->
    @if (!isLoading() && adjustments().length === 0) {
      <div class="p-8 md:p-12 text-center text-gray-500">
        <app-icon
          name="clipboard-list"
          [size]="48"
          class="mx-auto mb-4 text-gray-300">
        </app-icon>
        <h3 class="text-lg font-medium text-gray-900">{{ getEmptyStateTitle() }}</h3>
        <p class="mt-1 text-sm text-text-secondary">{{ getEmptyStateDescription() }}</p>

        @if (hasFilters()) {
          <div class="mt-6 flex justify-center gap-3">
            <app-button variant="outline" (clicked)="onClearFilters()">
              Limpiar filtros
            </app-button>
          </div>
        } @else {
          <div class="mt-6">
            <app-button variant="primary" (clicked)="onActionClick('create')">
              <app-icon name="plus" [size]="16" slot="icon"></app-icon>
              Crear Ajuste
            </app-button>
          </div>
        }
      </div>
    }

    <!-- Adjustments List -->
    @if (!isLoading() && adjustments().length > 0) {
      <div class="px-2 pb-2 pt-1 md:p-4">
        <app-responsive-data-view
          [data]="adjustments()"
          [columns]="tableColumns"
          [actions]="tableActions"
          [cardConfig]="cardConfig"
          [loading]="isLoading()"
          [sortable]="true"
          emptyMessage="No hay ajustes de inventario"
          emptyIcon="clipboard-list">
        </app-responsive-data-view>
      </div>
    }
  </div>
</div>
