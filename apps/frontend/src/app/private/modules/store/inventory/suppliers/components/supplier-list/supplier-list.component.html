<div class="md:space-y-4">
  <!-- Suppliers List Container -->
  <div
    class="md:bg-surface md:rounded-xl md:shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:border md:border-border md:min-h-[600px] md:overflow-hidden">
    <!-- Search Section: sticky below stats on mobile, normal on desktop -->
    <div
      class="sticky top-[99px] z-10 bg-background px-2 py-1.5 -mt-[5px] md:mt-0 md:static md:bg-transparent md:px-6 md:py-4 md:border-b md:border-border">
      <div class="flex flex-col gap-2 md:flex-row md:justify-between md:items-center md:gap-4">
        <!-- Title - smaller on mobile, larger on desktop -->
        <h2 class="text-[13px] font-bold text-gray-600 tracking-wide md:text-lg md:font-semibold md:text-text-primary">
          Proveedores ({{ totalItems }})
        </h2>

        <!-- Search row - horizontal on mobile -->
        <div class="flex items-center gap-2 w-full md:w-auto">
          <app-inputsearch class="flex-1 md:w-64 shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none rounded-[10px]"
            size="sm" placeholder="Buscar proveedor..." [debounceTime]="300" [ngModel]="searchTerm"
            (ngModelChange)="onSearchChange($event)"></app-inputsearch>

          <app-button variant="outline" size="sm"
            customClasses="w-9 h-9 !px-0 bg-surface shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none !rounded-[10px] shrink-0"
            (clicked)="create.emit()" title="Agregar Proveedor">
            <app-icon slot="icon" name="plus" [size]="18"></app-icon>
          </app-button>

          <app-options-dropdown class="shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none rounded-[10px]"
            [filters]="filterConfigs" [filterValues]="filterValues" [actions]="dropdownActions" [isLoading]="isLoading"
            (filterChange)="onFilterChange($event)" (clearAllFilters)="clearFilters()"
            (actionClick)="onActionClick($event)"></app-options-dropdown>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="p-4 md:p-6 text-center">
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
      <p class="mt-2 text-text-secondary">Cargando proveedores...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && suppliers.length === 0" class="p-8 md:p-12 text-center text-gray-500">
      <app-icon name="users" [size]="48" class="mx-auto mb-4 text-gray-300"></app-icon>
      <h3 class="text-lg font-medium text-gray-900">{{ getEmptyStateTitle() }}</h3>
      <p class="mt-1">{{ getEmptyStateDescription() }}</p>
      <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-3">
        <app-button variant="primary" (clicked)="create.emit()">
          <app-icon name="plus" [size]="16" slot="icon"></app-icon>
          Agregar Proveedor
        </app-button>
        @if (hasFilters) {
        <app-button variant="outline" (clicked)="clearFilters()">
          <app-icon name="x" [size]="16" slot="icon"></app-icon>
          Limpiar Filtros
        </app-button>
        }
      </div>
    </div>

    <!-- Suppliers List -->
    <div *ngIf="!isLoading && suppliers.length > 0" class="px-2 pb-2 pt-3 md:p-4">
      <app-responsive-data-view [data]="suppliers" [columns]="tableColumns" [cardConfig]="cardConfig"
        [actions]="tableActions" [loading]="isLoading" [sortable]="true" emptyMessage="No hay proveedores registrados"
        emptyIcon="users" (sort)="sort.emit($event)" (rowClick)="edit.emit($event)"></app-responsive-data-view>

      <div class="mt-4 flex justify-center">
        <app-pagination
          [currentPage]="currentPage"
          [totalPages]="totalPages"
          [total]="totalItems"
          [limit]="limit"
          (pageChange)="pageChange.emit($event)"
        />
      </div>
    </div>
  </div>
</div>