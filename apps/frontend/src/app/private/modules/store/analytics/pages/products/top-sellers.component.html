<div class="space-y-6 w-full max-w-[1600px] mx-auto md:py-4">
  <!-- Filter Bar -->
  <div class="sticky top-0 z-10 bg-background px-2 py-1.5 md:static md:bg-transparent md:px-6 md:py-4 md:border-b md:border-border">
    <div class="flex flex-col gap-2 md:flex-row md:justify-between md:items-center md:gap-4">
      <h2 class="text-[13px] font-bold text-gray-600 tracking-wide md:text-lg md:font-semibold md:text-text-primary">
        Productos Más Vendidos
      </h2>

      <div class="flex items-center gap-2 flex-wrap">
        <vendix-date-range-filter
          [value]="(dateRange$ | async) ?? undefined"
          (valueChange)="onDateRangeChange($event)"
        ></vendix-date-range-filter>
      </div>
    </div>
  </div>

  <!-- Chart -->
  <div class="bg-surface border border-border rounded-xl overflow-hidden">
    <div class="p-4 border-b border-border">
      <h3 class="font-semibold text-text-primary">Top 10 por Ingresos</h3>
      <p class="text-sm text-text-secondary">Productos con mayor facturación en el período</p>
    </div>
    <div class="p-4">
      @if (loadingTopSellers$ | async) {
        <div class="h-80 flex items-center justify-center">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
        </div>
      } @else {
        <app-chart
          [options]="topSellersChartOptions"
          size="large"
        ></app-chart>
      }
    </div>
  </div>

  <!-- Top Sellers Table -->
  <div class="bg-surface border border-border rounded-xl overflow-hidden">
    <div class="p-4 border-b border-border">
      <h3 class="font-semibold text-text-primary">Detalle de Más Vendidos</h3>
    </div>

    <app-responsive-data-view
      [data]="(topSellers$ | async) ?? []"
      [columns]="tableColumns"
      [cardConfig]="cardConfig"
      [loading]="(loadingTopSellers$ | async) ?? false"
      emptyMessage="No hay datos de ventas en este período"
      emptyIcon="trophy"
    ></app-responsive-data-view>
  </div>
</div>
