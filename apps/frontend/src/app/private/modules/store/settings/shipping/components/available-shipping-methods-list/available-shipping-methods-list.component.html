<!-- Available Shipping Methods List - Mobile First Design -->
<div>
  <div class="bg-surface rounded-xl shadow-[0_2px_8px_rgba(0,0,0,0.07)] border border-border min-h-[300px] overflow-hidden">
    <!-- Header Section: Static - scrolls with content -->
    <div class="px-3 py-2.5 md:px-4 md:py-3 border-b border-border">
      <div class="flex flex-col gap-2 md:flex-row md:justify-between md:items-center md:gap-4">
        <!-- Title -->
        <h3 class="text-sm font-semibold text-text-primary">
          Disponibles ({{ filtered_methods().length }})
        </h3>

        <!-- Search row -->
        <div class="flex items-center gap-2 w-full md:w-auto">
          <app-inputsearch
            class="flex-1 md:w-48 shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none rounded-[10px]"
            size="sm"
            placeholder="Buscar método..."
            [debounceTime]="300"
            [ngModel]="search_term"
            (ngModelChange)="onSearchChange($event)"
          ></app-inputsearch>

          <app-options-dropdown
            class="shadow-[0_2px_8px_rgba(0,0,0,0.07)] md:shadow-none rounded-[10px]"
            [actions]="dropdown_actions"
            [isLoading]="is_loading()"
            (actionClick)="onActionClick($event)"
          ></app-options-dropdown>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    @if (is_loading()) {
      <div class="p-4 md:p-6 text-center">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
        <p class="mt-2 text-text-secondary text-sm">Cargando métodos...</p>
      </div>
    }

    <!-- Empty State -->
    @if (!is_loading() && filtered_methods().length === 0) {
      <div class="p-8 text-center">
        <div class="w-12 h-12 mx-auto mb-3 rounded-full bg-green-50 flex items-center justify-center">
          <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </div>
        <p class="text-sm text-text-secondary">¡Todos los métodos están activados!</p>
        <p class="text-xs text-gray-400 mt-1">No hay más métodos disponibles</p>
      </div>
    }

    <!-- Shipping Methods List -->
    @if (!is_loading() && filtered_methods().length > 0) {
      <div class="px-2 pb-2 pt-0 md:p-4">
        <app-responsive-data-view
          [data]="filtered_methods()"
          [columns]="table_columns"
          [actions]="table_actions"
          [cardConfig]="card_config"
          [loading]="is_loading()"
          emptyMessage="No hay métodos disponibles"
          emptyIcon="truck"
        ></app-responsive-data-view>
      </div>
    }
  </div>
</div>
