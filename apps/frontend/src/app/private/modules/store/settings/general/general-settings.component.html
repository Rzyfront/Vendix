<div class="general-settings min-h-screen">
  <app-sticky-header title="Configuración General"
    subtitle="Configura las preferencias administrativas y flujos de negocio" icon="settings" [badgeText]="badgeText()"
    [badgeColor]="badgeColor()" [badgePulse]="badgePulse()" [metadataContent]="metadataContent()"
    [actions]="headerActions()" (actionClicked)="onHeaderAction($event)">
  </app-sticky-header>

  <!-- Main Content Area -->
  <div class="max-w-[1600px] mx-auto p-4 md:p-6 pb-20">
    @if (isLoading()) {
    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-12">
      <div class="text-center">
        <div class="inline-block animate-spin rounded-full h-10 w-10 border-4 border-blue-100 border-t-blue-600 mb-4">
        </div>
        <p class="text-gray-500 font-medium">Cargando configuraciones...</p>
      </div>
    </div>
    } @else {
    <div class="h-full">
      <div class="columns-1 lg:columns-2 gap-6 space-y-6">
        <!-- Identity & General (Merged Section) -->
        <div class="break-inside-avoid mb-6 bg-white rounded-xl border border-gray-200 p-4 md:p-6 shadow-sm">
          <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
            <div class="w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center">
              <app-icon name="user" size="18" class="text-blue-600"></app-icon>
            </div>
            Identidad y General
          </h2>
          <div class="space-y-8">
            <app-general-settings-form [settings]="settings.general"
              (settingsChange)="onSectionChange('general', $event)" />
            <hr class="border-gray-100">
            <app-app-settings-form [settings]="settings.app" (settingsChange)="onSectionChange('app', $event)" />
          </div>
        </div>

        <!-- Inventory Section -->
        <div class="break-inside-avoid mb-6 bg-white rounded-xl border border-gray-200 p-4 md:p-6 shadow-sm">
          <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
            <div class="w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center">
              <app-icon name="package" size="18" class="text-green-600"></app-icon>
            </div>
            Inventario
          </h2>
          <app-inventory-settings-form [settings]="settings.inventory"
            (settingsChange)="onSectionChange('inventory', $event)" />
        </div>

        <!-- Notifications Section -->
        <div class="break-inside-avoid mb-6 bg-white rounded-xl border border-gray-200 p-4 md:p-6 shadow-sm">
          <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
            <div class="w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center">
              <app-icon name="bell" size="18" class="text-purple-600"></app-icon>
            </div>
            Notificaciones
          </h2>
          <app-notifications-settings-form [settings]="settings.notifications"
            (settingsChange)="onSectionChange('notifications', $event)" />
        </div>

        <!-- POS Section -->
        <div class="break-inside-avoid mb-6 bg-white rounded-xl border border-gray-200 p-4 md:p-6 shadow-sm">
          <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
            <div class="w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center">
              <app-icon name="monitor" size="18" class="text-orange-600"></app-icon>
            </div>
            Punto de Venta (POS)
          </h2>
          <app-pos-settings-form [settings]="settings.pos" (settingsChange)="onSectionChange('pos', $event)" />
        </div>

        <!-- Receipts Section -->
        <div class="break-inside-avoid mb-6 bg-white rounded-xl border border-gray-200 p-4 md:p-6 shadow-sm">
          <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
            <div class="w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center">
              <app-icon name="file-text" size="18" class="text-indigo-600"></app-icon>
            </div>
            Recibos y Facturación
          </h2>
          <app-receipts-settings-form [settings]="settings.receipts"
            (settingsChange)="onSectionChange('receipts', $event)" />
        </div>

      </div>
    </div>
    }
  </div>
</div>