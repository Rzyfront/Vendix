<div class="pos-settings-form">
  <div class="space-y-6">
    <!-- Sales & Configuration -->
    <div>
      <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-4">Ventas y Operación</h4>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <app-setting-toggle [formControl]="allowAnonymousSalesControl" label="Ventas Anónimas"
          description="Sin registro de cliente" (changed)="onFieldChange()"></app-setting-toggle>
        <app-setting-toggle [formControl]="anonymousSalesAsDefaultControl" label="Anónimas por Defecto"
          description="Tipo de venta predeterminado" [disabled]="!allowAnonymousSalesControl.value"
          (changed)="onFieldChange()"></app-setting-toggle>
        <app-setting-toggle [formControl]="offlineModeEnabledControl" label="Modo Offline"
          description="Operar sin internet" (changed)="onFieldChange()"></app-setting-toggle>
        <app-setting-toggle [formControl]="requireCashDrawerOpenControl" label="Apertura de Caja"
          description="Monto inicial requerido" (changed)="onFieldChange()"></app-setting-toggle>
      </div>
    </div>

    <!-- Business Hours -->
    <div>
      <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-4">Horarios de Atención</h4>
      <div class="mb-4">
        <app-setting-toggle [formControl]="enableScheduleValidationControl" label="Habilitar Horarios"
          description="Restringir ventas fuera del horario configurado" (changed)="onFieldChange()"></app-setting-toggle>
      </div>
      <div class="grid grid-cols-1 gap-3">
        @for (day of daysOfWeek; track day.key) {
          <div class="day-row">
            <div class="day-row-top">
              <span class="day-label">{{ day.label }}</span>
              <button type="button" (click)="toggleDayStatus(day.key)"
                class="day-toggle-btn"
                [class.day-toggle-btn--close]="!isDayClosed(day.key)"
                [class.day-toggle-btn--open]="isDayClosed(day.key)">
                {{ isDayClosed(day.key) ? 'Abrir' : 'Cerrar' }}
              </button>
            </div>
            @if (!isDayClosed(day.key)) {
              <div class="day-times">
                <div class="time-field">
                  <label class="time-label">Apertura</label>
                  <input type="time" [value]="form.get('business_hours')?.value[day.key]?.open || ''"
                    (change)="onTimeChange(day.key, 'open', $any($event).target.value)"
                    class="time-input" />
                </div>
                <span class="time-separator">—</span>
                <div class="time-field">
                  <label class="time-label">Cierre</label>
                  <input type="time" [value]="form.get('business_hours')?.value[day.key]?.close || ''"
                    (change)="onTimeChange(day.key, 'close', $any($event).target.value)"
                    class="time-input" />
                </div>
              </div>
            } @else {
              <span class="day-closed-label">Cerrado</span>
            }
          </div>
        }
      </div>
    </div>
  </div>
</div>
