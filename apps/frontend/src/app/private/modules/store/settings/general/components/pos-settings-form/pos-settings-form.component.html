<div class="pos-settings-form">
  <div class="space-y-8">
    <!-- Sales & Configuration -->
    <div class="space-y-4">
      <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Ventas y Operaci贸n</h4>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
        <app-setting-toggle [formControl]="allowAnonymousSalesControl" label="Ventas An贸nimas"
          description="Sin registro de cliente" (changed)="onFieldChange()"></app-setting-toggle>

        <app-setting-toggle [formControl]="anonymousSalesAsDefaultControl" label="An贸nimas por Defecto"
          description="Tipo de venta predeterminado" [disabled]="!allowAnonymousSalesControl.value"
          (changed)="onFieldChange()"></app-setting-toggle>

        <app-setting-toggle [formControl]="offlineModeEnabledControl" label="Modo Offline"
          description="Operar sin internet" (changed)="onFieldChange()"></app-setting-toggle>

        <app-setting-toggle [formControl]="requireCashDrawerOpenControl" label="Apertura de Caja"
          description="Monto inicial requerido" (changed)="onFieldChange()"></app-setting-toggle>
      </div>
    </div>

    <!-- Business Hours - Editable -->
    <div class="space-y-4">
      <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Horarios de Atenci贸n</h4>
      <div class="grid grid-cols-1 gap-3">
        @for (day of daysOfWeek; track day.key) {
        <div class="flex items-center gap-4 p-3 bg-white border border-gray-100 rounded-xl shadow-sm">
          <div class="w-24">
            <span class="text-xs font-bold text-gray-400 uppercase">{{ day.label }}</span>
          </div>

          <div class="flex-1 flex items-center gap-3">
            @if (isDayClosed(day.key)) {
            <span class="text-xs text-red-500 font-medium italic">Cerrado</span>
            } @else {
            <div class="flex items-center gap-2">
              <input type="time" [value]="form.get('business_hours')?.value[day.key]?.open || ''"
                (change)="onTimeChange(day.key, 'open', $any($event).target.value)"
                class="px-3 py-1.5 border border-gray-200 rounded-lg text-xs focus:ring-2 focus:ring-blue-500/20 focus:outline-none" />
              <span class="text-gray-400">-</span>
              <input type="time" [value]="form.get('business_hours')?.value[day.key]?.close || ''"
                (change)="onTimeChange(day.key, 'close', $any($event).target.value)"
                class="px-3 py-1.5 border border-gray-200 rounded-lg text-xs focus:ring-2 focus:ring-blue-500/20 focus:outline-none" />
            </div>
            }
          </div>

          <button type="button" (click)="toggleDayStatus(day.key)"
            class="px-3 py-1.5 text-[10px] font-bold uppercase rounded-lg transition-all border"
            [class.bg-red-50]="!isDayClosed(day.key)" [class.text-red-600]="!isDayClosed(day.key)"
            [class.border-red-100]="!isDayClosed(day.key)" [class.bg-green-50]="isDayClosed(day.key)"
            [class.text-green-600]="isDayClosed(day.key)" [class.border-green-100]="isDayClosed(day.key)">
            {{ isDayClosed(day.key) ? 'Abrir' : 'Cerrar' }}
          </button>
        </div>
        }
      </div>
    </div>
  </div>
</div>