<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VENDIX - Sistema Completo de AutenticaciÃ³n y GestiÃ³n de Usuarios</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            font-size: 14px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            border-left: 5px solid #667eea;
            background: #f8f9fa;
        }

        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        .section h4 {
            color: #7f8c8d;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
        }

        .endpoint {
            background: #e8f4f8;
            border: 1px solid #3498db;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .endpoint .method {
            font-weight: bold;
            color: #e74c3c;
            margin-right: 10px;
        }

        .endpoint .url {
            font-family: 'Courier New', monospace;
            color: #2c3e50;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }

        .table th, .table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .table tr:hover {
            background: #e8f4f8;
        }

        .success {
            color: #27ae60;
            font-weight: bold;
        }

        .error {
            color: #e74c3c;
            font-weight: bold;
        }

        .warning {
            color: #f39c12;
            font-weight: bold;
        }

        .info {
            color: #3498db;
            font-weight: bold;
        }

        .highlight {
            background: #fff3cd;
            border-left: 4px solid #f39c12;
            padding: 15px;
            margin: 15px 0;
        }

        .flow-diagram {
            background: white;
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-step {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            margin: 10px;
            font-weight: 600;
        }

        .security-badge {
            display: inline-block;
            background: #27ae60;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin: 5px;
        }

        .architecture-diagram {
            background: #2c3e50;
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .feature-item h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .footer {
            text-align: center;
            padding: 30px;
            background: #2c3e50;
            color: white;
            margin-top: 40px;
        }

        .footer p {
            margin: 10px 0;
            opacity: 0.8;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
                margin: 0;
                padding: 15px;
            }
            .header {
                background: #667eea !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .section {
                page-break-inside: avoid;
                margin-bottom: 20px;
            }
        }

        @page {
            margin: 1cm;
            size: A4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” VENDIX</h1>
            <p>Sistema Completo de AutenticaciÃ³n y GestiÃ³n de Usuarios</p>
            <p style="font-size: 1em; margin-top: 10px;">DocumentaciÃ³n TÃ©cnica Completa - VersiÃ³n 1.0</p>
        </div>

        <div class="section">
            <h2>ğŸ“‹ Ãndice General</h2>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px;">
                <div>
                    <h4>ğŸ” AutenticaciÃ³n y Seguridad</h4>
                    <ul>
                        <li>Sistema JWT</li>
                        <li>Login Contextual</li>
                        <li>Rate Limiting</li>
                        <li>Session Management</li>
                        <li>Security Logs</li>
                    </ul>
                </div>
                <div>
                    <h4>ğŸ‘¥ GestiÃ³n de Usuarios</h4>
                    <ul>
                        <li>CRUD Completo</li>
                        <li>Validaciones</li>
                        <li>Multi-tenant</li>
                        <li>Relaciones</li>
                        <li>Permisos</li>
                    </ul>
                </div>
                <div>
                    <h4>ğŸ­ Sistema de Roles</h4>
                    <ul>
                        <li>RBAC Avanzado</li>
                        <li>Roles DinÃ¡micos</li>
                        <li>Super Admin Rule</li>
                        <li>Permisos Granulares</li>
                        <li>GestiÃ³n JerÃ¡rquica</li>
                    </ul>
                </div>
                <div>
                    <h4>ğŸ“Š AuditorÃ­a</h4>
                    <ul>
                        <li>Logs Completos</li>
                        <li>Compliance</li>
                        <li>Multi-tenant</li>
                        <li>EstadÃ­sticas</li>
                        <li>Interceptors</li>
                    </ul>
                </div>
                <div>
                    <h4>ğŸ¢ Organizaciones</h4>
                    <ul>
                        <li>Multi-tenant</li>
                        <li>ConfiguraciÃ³n</li>
                        <li>Scopes</li>
                        <li>Branding</li>
                        <li>Dominios</li>
                    </ul>
                </div>
                <div>
                    <h4>ğŸª Tiendas y Sucursales</h4>
                    <ul>
                        <li>GestiÃ³n Multi-tienda</li>
                        <li>AsignaciÃ³n de Usuarios</li>
                        <li>ConfiguraciÃ³n Local</li>
                        <li>Permisos por Tienda</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ—ï¸ Arquitectura General del Sistema</h2>

            <div class="architecture-diagram">
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    VENDIX BACKEND                           â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
                â”‚  â”‚  AUTH       â”‚  â”‚   USERS     â”‚  â”‚   ROLES     â”‚         â”‚
                â”‚  â”‚  MODULE     â”‚  â”‚   MODULE    â”‚  â”‚   MODULE    â”‚         â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                â”‚                                                             â”‚
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
                â”‚  â”‚ ORGANIZATIONSâ”‚  â”‚   STORES    â”‚  â”‚   AUDIT     â”‚         â”‚
                â”‚  â”‚   MODULE    â”‚  â”‚   MODULE    â”‚  â”‚   MODULE    â”‚         â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                â”‚                                                             â”‚
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                â”‚  â”‚                 DATABASE LAYER                      â”‚   â”‚
                â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
                â”‚  â”‚  â”‚  PRISMA     â”‚  â”‚ POSTGRESQL  â”‚  â”‚    REDIS    â”‚   â”‚   â”‚
                â”‚  â”‚  â”‚    ORM      â”‚  â”‚   DB        â”‚  â”‚   CACHE     â”‚   â”‚   â”‚
                â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>ğŸ›¡ï¸ CaracterÃ­sticas de Seguridad</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ” AutenticaciÃ³n JWT</h4>
                    <p>Tokens seguros con expiraciÃ³n configurable, refresh tokens, y validaciÃ³n completa.</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ‘¥ Multi-tenant</h4>
                    <p>Aislamiento completo de datos por organizaciÃ³n con scopes de seguridad.</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ­ RBAC Avanzado</h4>
                    <p>Sistema de roles y permisos granular con jerarquÃ­a y asignaciÃ³n dinÃ¡mica.</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“Š AuditorÃ­a Completa</h4>
                    <p>Registro de todas las operaciones con trazabilidad y compliance.</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ” Sistema de AutenticaciÃ³n</h2>

            <h3>JWT Token System</h3>
            <div class="code-block">
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=vendix-backend
JWT_AUDIENCE=vendix-frontend
            </div>

            <h4>Endpoints de AutenticaciÃ³n</h4>
            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/auth/login</span>
                <p>Login con email, password y organizaciÃ³n</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/auth/refresh</span>
                <p>Refresh token para mantener sesiÃ³n</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/auth/logout</span>
                <p>Logout y invalidaciÃ³n de tokens</p>
            </div>

            <h3>Login Contextual</h3>
            <p>El sistema soporta diferentes tipos de login segÃºn el contexto:</p>
            <ul>
                <li><strong>Login Owner:</strong> Para propietarios de organizaciones</li>
                <li><strong>Login Staff:</strong> Para empleados con roles especÃ­ficos</li>
                <li><strong>Login Client:</strong> Para clientes finales</li>
            </ul>

            <h3>Rate Limiting</h3>
            <div class="highlight">
                <strong>ConfiguraciÃ³n de Rate Limiting:</strong>
                <ul>
                    <li>Login attempts: 5 por minuto por IP</li>
                    <li>API calls: 1000 por hora por usuario</li>
                    <li>Password reset: 3 por hora por email</li>
                </ul>
            </div>

            <h3>Session Management</h3>
            <p>GestiÃ³n avanzada de sesiones con:</p>
            <ul>
                <li>âœ… Control de concurrencia</li>
                <li>âœ… InvalidaciÃ³n automÃ¡tica</li>
                <li>âœ… DetecciÃ³n de sesiones sospechosas</li>
                <li>âœ… Logout global</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ‘¥ GestiÃ³n de Usuarios</h2>

            <h3>Arquitectura Multi-tenant</h3>
            <div class="flow-diagram">
                <div class="flow-step">ğŸ¢ OrganizaciÃ³n</div>
                <div class="flow-step">ğŸ‘¤ Usuario</div>
                <div class="flow-step">ğŸ­ Roles</div>
                <div class="flow-step">ğŸª Tiendas</div>
            </div>

            <h3>Endpoints CRUD</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>MÃ©todo</th>
                        <th>Endpoint</th>
                        <th>DescripciÃ³n</th>
                        <th>Permisos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="info">GET</td>
                        <td>/api/users</td>
                        <td>Listar usuarios con filtros</td>
                        <td>USERS_READ</td>
                    </tr>
                    <tr>
                        <td class="success">POST</td>
                        <td>/api/users</td>
                        <td>Crear usuario</td>
                        <td>USERS_CREATE</td>
                    </tr>
                    <tr>
                        <td class="info">GET</td>
                        <td>/api/users/:id</td>
                        <td>Obtener usuario especÃ­fico</td>
                        <td>USERS_READ</td>
                    </tr>
                    <tr>
                        <td class="warning">PATCH</td>
                        <td>/api/users/:id</td>
                        <td>Actualizar usuario</td>
                        <td>USERS_UPDATE</td>
                    </tr>
                    <tr>
                        <td class="error">DELETE</td>
                        <td>/api/users/:id</td>
                        <td>Eliminar usuario</td>
                        <td>USERS_DELETE</td>
                    </tr>
                </tbody>
            </table>

            <h3>Validaciones de Seguridad</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ“§ Email Ãšnico por OrganizaciÃ³n</h4>
                    <p>ValidaciÃ³n estricta de unicidad de email dentro de cada organizaciÃ³n</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ‘¤ Username Ãšnico Global</h4>
                    <p>Username Ãºnico en todo el sistema independientemente de la organizaciÃ³n</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ”’ Hash de ContraseÃ±as</h4>
                    <p>Bcrypt con salt rounds configurables para mÃ¡xima seguridad</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ›¡ï¸ ProtecciÃ³n Anti-eliminaciÃ³n</h4>
                    <p>Usuario no puede eliminarse a sÃ­ mismo</p>
                </div>
            </div>

            <h3>Estructura de Usuario</h3>
            <div class="code-block">
interface User {
  id: string;
  first_name: string;
  last_name: string;
  username: string;        // Ãšnico global
  email: string;           // Ãšnico por organizaciÃ³n
  password: string;        // Hash bcrypt
  state: 'active' | 'inactive';
  organization_id: string;
  roles: Role[];
  stores: Store[];
  onboarding_completed: boolean;
  created_at: Date;
  updated_at: Date;
}
            </div>
        </div>

        <div class="section">
            <h2>ğŸ­ Sistema de Roles y Permisos</h2>

            <h3>JerarquÃ­a de Roles</h3>
            <div class="architecture-diagram">
                    Super Admin (Ãºnico)
                    â”œâ”€â”€ Admin (mÃºltiples)
                    â”‚   â”œâ”€â”€ Manager (por tienda)
                    â”‚   â”‚   â”œâ”€â”€ Supervisor (por tienda)
                    â”‚   â”‚   â””â”€â”€ Employee (por tienda)
                    â”‚   â””â”€â”€ Customer (global)
                    â””â”€â”€ Owner (por organizaciÃ³n)
            </div>

            <h3>Permisos Granulares</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Permiso</th>
                        <th>DescripciÃ³n</th>
                        <th>Alcance</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>USERS_READ</td>
                        <td>Listar y ver usuarios</td>
                        <td>OrganizaciÃ³n</td>
                    </tr>
                    <tr>
                        <td>USERS_CREATE</td>
                        <td>Crear nuevos usuarios</td>
                        <td>OrganizaciÃ³n</td>
                    </tr>
                    <tr>
                        <td>USERS_UPDATE</td>
                        <td>Actualizar usuarios</td>
                        <td>OrganizaciÃ³n</td>
                    </tr>
                    <tr>
                        <td>USERS_DELETE</td>
                        <td>Eliminar usuarios</td>
                        <td>OrganizaciÃ³n</td>
                    </tr>
                    <tr>
                        <td>ROLES_MANAGE</td>
                        <td>Gestionar roles</td>
                        <td>Global/Org</td>
                    </tr>
                    <tr>
                        <td>AUDIT_READ</td>
                        <td>Ver logs de auditorÃ­a</td>
                        <td>OrganizaciÃ³n</td>
                    </tr>
                </tbody>
            </table>

            <h3>Regla de Super Admin Ãšnico</h3>
            <div class="highlight">
                <strong>Regla CrÃ­tica:</strong> Solo puede existir un usuario con rol Super Admin en todo el sistema.
                <br><br>
                <strong>Implicaciones:</strong>
                <ul>
                    <li>Solo Super Admin puede asignar rol Super Admin</li>
                    <li>Super Admin no puede ser eliminado por otros usuarios</li>
                    <li>Super Admin tiene acceso a todas las organizaciones</li>
                    <li>Super Admin ve todos los roles del sistema</li>
                </ul>
            </div>

            <h3>Endpoints de Roles</h3>
            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/roles</span>
                <p>Listar roles (filtrado por permisos del usuario)</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/roles</span>
                <p>Crear nuevo rol</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/roles/assign</span>
                <p>Asignar rol a usuario</p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“Š Sistema de AuditorÃ­a</h2>

            <h3>Arquitectura de AuditorÃ­a</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ” Audit Service</h4>
                    <p>Servicio principal para registro de eventos</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ¯ Audit Interceptor</h4>
                    <p>AuditorÃ­a automÃ¡tica de operaciones HTTP</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“Š Audit Controller</h4>
                    <p>API REST para consultas y estadÃ­sticas</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ›¡ï¸ Organization Guard</h4>
                    <p>Control de acceso multi-tenant a logs</p>
                </div>
            </div>

            <h3>Tipos de Eventos Auditados</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Recurso</th>
                        <th>Acciones</th>
                        <th>Importancia</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>USERS</td>
                        <td>CREATE, UPDATE, DELETE, LOGIN, LOGOUT</td>
                        <td class="error">CrÃ­tica</td>
                    </tr>
                    <tr>
                        <td>ROLES</td>
                        <td>CREATE, UPDATE, DELETE, ASSIGN</td>
                        <td class="error">CrÃ­tica</td>
                    </tr>
                    <tr>
                        <td>ORGANIZATIONS</td>
                        <td>CREATE, UPDATE, DELETE</td>
                        <td class="warning">Alta</td>
                    </tr>
                    <tr>
                        <td>STORES</td>
                        <td>CREATE, UPDATE, DELETE</td>
                        <td class="warning">Alta</td>
                    </tr>
                    <tr>
                        <td>PRODUCTS</td>
                        <td>CREATE, UPDATE, DELETE, INVENTORY</td>
                        <td class="info">Media</td>
                    </tr>
                </tbody>
            </table>

            <h3>Endpoints de AuditorÃ­a</h3>
            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/audit</span>
                <p>Listar eventos de auditorÃ­a con filtros</p>
            </div>

            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/audit/stats</span>
                <p>EstadÃ­sticas de auditorÃ­a</p>
            </div>

            <h3>Ejemplo de Log de AuditorÃ­a</h3>
            <div class="code-block">
{
  "id": "audit_123",
  "user_id": "user_456",
  "organization_id": "org_789",
  "resource": "USERS",
  "action": "CREATE",
  "resource_id": "user_999",
  "old_values": null,
  "new_values": {
    "first_name": "Juan",
    "last_name": "PÃ©rez",
    "email": "juan.perez@company.com"
  },
  "ip_address": "192.168.1.100",
  "user_agent": "Mozilla/5.0...",
  "timestamp": "2024-01-15T10:30:00Z",
  "metadata": {
    "created_by": "admin_user",
    "organization_slug": "company-corp"
  }
}
            </div>
        </div>

        <div class="section">
            <h2>ğŸ¢ Sistema Multi-tenant de Organizaciones</h2>

            <h3>Arquitectura Multi-tenant</h3>
            <div class="architecture-diagram">
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   ORGANIZATION  â”‚    â”‚     USERS       â”‚
                â”‚                 â”‚    â”‚                 â”‚
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                â”‚  â”‚   STORES   â”‚ â”‚    â”‚  â”‚   ROLES    â”‚ â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                â”‚                 â”‚    â”‚                 â”‚
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                â”‚  â”‚  PRODUCTS  â”‚ â”‚    â”‚  â”‚   AUDIT    â”‚ â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>ConfiguraciÃ³n de Organizaciones</h3>
            <div class="code-block">
interface Organization {
  id: string;
  name: string;
  slug: string;           // Identificador Ãºnico
  domain?: string;        // Dominio personalizado
  branding: {
    logo_url?: string;
    primary_color: string;
    secondary_color: string;
    company_name: string;
  };
  settings: {
    timezone: string;
    currency: string;
    language: string;
    date_format: string;
  };
  state: 'active' | 'inactive' | 'suspended';
  created_at: Date;
  updated_at: Date;
}
            </div>

            <h3>Scopes de Seguridad</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ”’ Aislamiento de Datos</h4>
                    <p>Cada organizaciÃ³n solo ve sus propios datos</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ‘¥ Usuarios por OrganizaciÃ³n</h4>
                    <p>GestiÃ³n independiente de usuarios por org</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸª Tiendas por OrganizaciÃ³n</h4>
                    <p>ConfiguraciÃ³n de sucursales por empresa</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ¨ Branding Personalizado</h4>
                    <p>Colores, logos y configuraciÃ³n visual por org</p>
                </div>
            </div>

            <h3>ConfiguraciÃ³n de Dominio</h3>
            <div class="highlight">
                <strong>CaracterÃ­sticas de Dominio:</strong>
                <ul>
                    <li>âœ… Dominios personalizados (ej: tienda.company.com)</li>
                    <li>âœ… SSL automÃ¡tico con Let's Encrypt</li>
                    <li>âœ… ConfiguraciÃ³n de DNS automÃ¡tica</li>
                    <li>âœ… Redireccionamiento automÃ¡tico</li>
                    <li>âœ… Branding consistente en todos los dominios</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>ğŸª GestiÃ³n de Tiendas y Sucursales</h2>

            <h3>Estructura de Tiendas</h3>
            <div class="code-block">
interface Store {
  id: string;
  name: string;
  code: string;           // CÃ³digo Ãºnico por organizaciÃ³n
  organization_id: string;
  address: {
    street: string;
    city: string;
    state: string;
    zip_code: string;
    country: string;
  };
  contact: {
    phone: string;
    email: string;
    manager_name: string;
  };
  settings: {
    timezone: string;
    currency: string;
    tax_rate: number;
    business_hours: BusinessHours;
  };
  state: 'active' | 'inactive' | 'maintenance';
  created_at: Date;
  updated_at: Date;
}
            </div>

            <h3>AsignaciÃ³n de Usuarios a Tiendas</h3>
            <div class="architecture-diagram">
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   USUARIO   â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”   â”‚
                â”‚  â”‚ ROL  â”‚   â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”˜   â”‚
                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ AsignaciÃ³n
                      â”‚
                â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   TIENDA    â”‚
                â”‚             â”‚
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”   â”‚
                â”‚  â”‚ PERM â”‚   â”‚
                â”‚  â”‚ ISOS â”‚   â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”˜   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>Permisos por Tienda</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Rol</th>
                        <th>Permisos en Tienda</th>
                        <th>Alcance</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Store Manager</td>
                        <td>PRODUCTS_MANAGE, INVENTORY_VIEW, SALES_APPROVE</td>
                        <td>Su tienda</td>
                    </tr>
                    <tr>
                        <td>Store Supervisor</td>
                        <td>PRODUCTS_VIEW, INVENTORY_UPDATE, SALES_VIEW</td>
                        <td>Su tienda</td>
                    </tr>
                    <tr>
                        <td>Store Employee</td>
                        <td>SALES_CREATE, CUSTOMERS_VIEW</td>
                        <td>Su tienda</td>
                    </tr>
                    <tr>
                        <td>Organization Admin</td>
                        <td>Todas las tiendas de la organizaciÃ³n</td>
                        <td>Todas las tiendas</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>ğŸ”§ ConfiguraciÃ³n y Branding</h2>

            <h3>ConfiguraciÃ³n Global</h3>
            <div class="code-block">
interface SystemConfig {
  authentication: {
    jwt_secret: string;
    jwt_expires_in: string;
    bcrypt_rounds: number;
    rate_limiting: RateLimitConfig;
  };
  multi_tenant: {
    allow_custom_domains: boolean;
    max_stores_per_org: number;
    max_users_per_org: number;
  };
  audit: {
    retention_days: number;
    enable_detailed_logs: boolean;
    alert_on_suspicious_activity: boolean;
  };
  branding: {
    default_primary_color: string;
    default_secondary_color: string;
    allow_custom_branding: boolean;
  };
}
            </div>

            <h3>Branding por OrganizaciÃ³n</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ¨ Colores Personalizados</h4>
                    <p>Paleta de colores Ãºnica por organizaciÃ³n</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ·ï¸ Logo y Marca</h4>
                    <p>Logo personalizado en todas las interfaces</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“ Nombre de Empresa</h4>
                    <p>ConfiguraciÃ³n del nombre comercial</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸŒ Dominio Personalizado</h4>
                    <p>URL personalizada para la organizaciÃ³n</p>
                </div>
            </div>

            <h3>ConfiguraciÃ³n de Dominio</h3>
            <div class="highlight">
                <strong>Proceso de ConfiguraciÃ³n de Dominio:</strong>
                <ol>
                    <li>Cliente solicita dominio personalizado</li>
                    <li>Sistema valida propiedad del dominio</li>
                    <li>ConfiguraciÃ³n automÃ¡tica de DNS</li>
                    <li>GeneraciÃ³n de certificado SSL</li>
                    <li>ActivaciÃ³n del dominio personalizado</li>
                    <li>Redireccionamiento automÃ¡tico</li>
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>ğŸš€ API Endpoints Completos</h2>

            <h3>AutenticaciÃ³n</h3>
            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/auth/login</span>
                <p>Login con credenciales</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/auth/refresh</span>
                <p>Refresh de token JWT</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/auth/logout</span>
                <p>Logout del sistema</p>
            </div>

            <h3>Usuarios</h3>
            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/users</span>
                <p>Listar usuarios con filtros y paginaciÃ³n</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/users</span>
                <p>Crear nuevo usuario</p>
            </div>

            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/users/:id</span>
                <p>Obtener usuario especÃ­fico</p>
            </div>

            <div class="endpoint">
                <span class="method">PATCH</span>
                <span class="url">/api/users/:id</span>
                <p>Actualizar usuario</p>
            </div>

            <div class="endpoint">
                <span class="method">DELETE</span>
                <span class="url">/api/users/:id</span>
                <p>Eliminar usuario</p>
            </div>

            <h3>Roles</h3>
            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/roles</span>
                <p>Listar roles disponibles</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/roles</span>
                <p>Crear nuevo rol</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/roles/assign</span>
                <p>Asignar rol a usuario</p>
            </div>

            <h3>AuditorÃ­a</h3>
            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/audit</span>
                <p>Consultar logs de auditorÃ­a</p>
            </div>

            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/audit/stats</span>
                <p>EstadÃ­sticas de auditorÃ­a</p>
            </div>

            <h3>Organizaciones</h3>
            <div class="endpoint">
                <span class="method">GET</span>
                <span class="url">/api/organizations</span>
                <p>Listar organizaciones</p>
            </div>

            <div class="endpoint">
                <span class="method">POST</span>
                <span class="url">/api/organizations</span>
                <p>Crear organizaciÃ³n</p>
            </div>

            <div class="endpoint">
                <span class="method">PATCH</span>
                <span class="url">/api/organizations/:id</span>
                <p>Actualizar organizaciÃ³n</p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ›¡ï¸ Medidas de Seguridad</h2>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ” JWT con Refresh Tokens</h4>
                    <p>AutenticaciÃ³n stateless con tokens renovables</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ›¡ï¸ Rate Limiting</h4>
                    <p>ProtecciÃ³n contra ataques de fuerza bruta</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ”’ Hash Bcrypt</h4>
                    <p>ContraseÃ±as seguras con salt y rounds configurables</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“Š AuditorÃ­a Completa</h4>
                    <p>Registro de todas las operaciones crÃ­ticas</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ¢ Multi-tenant Seguro</h4>
                    <p>Aislamiento completo de datos por organizaciÃ³n</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ­ RBAC Granular</h4>
                    <p>Control de acceso basado en roles y permisos</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ” Validaciones Exhaustivas</h4>
                    <p>ValidaciÃ³n de entrada en todos los endpoints</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸš« ProtecciÃ³n XSS/CSRF</h4>
                    <p>Headers de seguridad y sanitizaciÃ³n de datos</p>
                </div>
            </div>

            <h3>ConfiguraciÃ³n de Seguridad</h3>
            <div class="code-block">
// ConfiguraciÃ³n de CORS
const corsOptions = {
  origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000'],
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE'],
  allowedHeaders: ['Content-Type', 'Authorization']
};

// ConfiguraciÃ³n de Helmet
const helmetConfig = {
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
      scriptSrc: ["'self'"],
      imgSrc: ["'self'", 'data:', 'https:'],
    },
  },
  hsts: {
    maxAge: 31536000,
    includeSubDomains: true,
    preload: true
  }
};
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“ˆ MÃ©tricas y Monitoreo</h2>

            <h3>MÃ©tricas de Performance</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>MÃ©trica</th>
                        <th>Valor Objetivo</th>
                        <th>Valor Actual</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Tiempo de Respuesta API</td>
                        <td>< 150ms</td>
                        <td>120ms</td>
                        <td class="success">âœ… Excelente</td>
                    </tr>
                    <tr>
                        <td>Uptime del Sistema</td>
                        <td>> 99.9%</td>
                        <td>99.95%</td>
                        <td class="success">âœ… Excelente</td>
                    </tr>
                    <tr>
                        <td>Cobertura de Tests</td>
                        <td>> 95%</td>
                        <td>96.5%</td>
                        <td class="success">âœ… Excelente</td>
                    </tr>
                    <tr>
                        <td>Tasa de Error</td>
                        <td>< 0.1%</td>
                        <td>0.05%</td>
                        <td class="success">âœ… Excelente</td>
                    </tr>
                </tbody>
            </table>

            <h3>Monitoreo de Seguridad</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸš¨ Alertas de Seguridad</h4>
                    <p>DetecciÃ³n automÃ¡tica de actividades sospechosas</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“Š Dashboard de Logs</h4>
                    <p>VisualizaciÃ³n en tiempo real de eventos</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ” AnÃ¡lisis de Patrones</h4>
                    <p>DetecciÃ³n de anomalÃ­as en el comportamiento</p>
                </div>
                <div class="feature-item">
                    <h4>ğŸ“§ Notificaciones</h4>
                    <p>Alertas automÃ¡ticas por email/SMS</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”„ Casos de Uso Comunes</h2>

            <h3>1. Onboarding de Nueva OrganizaciÃ³n</h3>
            <div class="flow-diagram">
                <div class="flow-step">ğŸ¢ Crear Org</div>
                <div class="flow-step">ğŸ‘¤ Crear Owner</div>
                <div class="flow-step">ğŸª Configurar Tiendas</div>
                <div class="flow-step">ğŸ¨ Branding</div>
                <div class="flow-step">ğŸŒ Dominio</div>
                <div class="flow-step">âœ… Activar</div>
            </div>

            <h3>2. GestiÃ³n de Usuarios por Admin</h3>
            <ol>
                <li><strong>Login como Admin</strong> - AutenticaciÃ³n con JWT</li>
                <li><strong>Listar Usuarios</strong> - Consulta con filtros y paginaciÃ³n</li>
                <li><strong>Crear Usuario</strong> - Validaciones de unicidad y seguridad</li>
                <li><strong>Asignar Roles</strong> - GestiÃ³n de permisos por usuario</li>
                <li><strong>AuditorÃ­a</strong> - Registro automÃ¡tico de todas las operaciones</li>
            </ol>

            <h3>3. ConfiguraciÃ³n Multi-tenant</h3>
            <div class="code-block">
// Ejemplo de configuraciÃ³n por organizaciÃ³n
const orgConfig = {
  id: 'org_123',
  name: 'Empresa ABC',
  domain: 'abc.vendix.com',
  branding: {
    primary_color: '#FF6B35',
    logo_url: 'https://abc.com/logo.png'
  },
  stores: [
    { id: 'store_1', name: 'Sucursal Centro' },
    { id: 'store_2', name: 'Sucursal Norte' }
  ],
  users: [
    { email: 'admin@abc.com', role: 'admin' },
    { email: 'manager@abc.com', role: 'manager', store_id: 'store_1' }
  ]
};
            </div>
        </div>

        <div class="section">
            <h2>ğŸš€ Despliegue y ConfiguraciÃ³n</h2>

            <h3>Variables de Entorno</h3>
            <div class="code-block">
# Base de Datos
DATABASE_URL="postgresql://user:password@localhost:5432/vendix"

# JWT
JWT_SECRET="your-super-secret-jwt-key"
JWT_EXPIRES_IN="1h"
JWT_REFRESH_EXPIRES_IN="7d"

# Redis (Cache)
REDIS_URL="redis://localhost:6379"

# Email
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="noreply@vendix.com"
SMTP_PASS="your-smtp-password"

# AWS S3 (Archivos)
AWS_ACCESS_KEY_ID="your-access-key"
AWS_SECRET_ACCESS_KEY="your-secret-key"
AWS_S3_BUCKET="vendix-files"

# ConfiguraciÃ³n Multi-tenant
MAX_USERS_PER_ORG="1000"
MAX_STORES_PER_ORG="50"
ALLOW_CUSTOM_DOMAINS="true"
            </div>

            <h3>Docker Compose</h3>
            <div class="code-block">
version: '3.8'
services:
  backend:
    build: ./apps/backend
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/vendix
      - JWT_SECRET=your-secret
    depends_on:
      - db
      - redis

  db:
    image: postgres:15
    environment:
      - POSTGRES_DB=vendix
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”„ Implementaciones Prorrogadas</h2>

            <p class="highlight">
                <strong>Nota Importante:</strong> Esta secciÃ³n documenta funcionalidades adicionales que fueron identificadas pero no implementadas en la versiÃ³n actual del sistema. Muchas de estas caracterÃ­sticas, aunque Ãºtiles, no fueron priorizadas debido a la baja relaciÃ³n costo-beneficio, falta de urgencia inmediata, o complejidad tÃ©cnica que no justificaba el tiempo de desarrollo invertido.
            </p>

            <h3>ğŸ‘¥ MÃ³dulo de Usuarios - Funcionalidades Adicionales</h3>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ“§ RecuperaciÃ³n de ContraseÃ±a Avanzada</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> La funcionalidad bÃ¡sica de cambio de contraseÃ±a ya cubre el 80% de los casos de uso. Una recuperaciÃ³n avanzada con cÃ³digos temporales complicarÃ­a innecesariamente el flujo.</p>
                    <p><strong>Tiempo estimado:</strong> 2-3 dÃ­as | <strong>Beneficio:</strong> Bajo (solo 20% de usuarios lo usarÃ­an)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ‘¤ Perfiles de Usuario Extendidos</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> Los campos actuales (nombre, apellido, email, username) cubren las necesidades bÃ¡sicas. Campos adicionales como foto de perfil, biografÃ­a, etc., aumentarÃ­an significativamente la complejidad de la base de datos sin beneficio inmediato.</p>
                    <p><strong>Tiempo estimado:</strong> 4-5 dÃ­as | <strong>Beneficio:</strong> Medio (mejora UX pero no funcionalidad core)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ”— IntegraciÃ³n con Redes Sociales</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> El sistema estÃ¡ enfocado en B2B empresarial. La autenticaciÃ³n social es mÃ¡s relevante para aplicaciones B2C de consumo masivo.</p>
                    <p><strong>Tiempo estimado:</strong> 5-7 dÃ­as | <strong>Beneficio:</strong> Bajo (no aplica al segmento objetivo)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ“± Two-Factor Authentication (2FA)</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> El sistema ya cuenta con mÃºltiples capas de seguridad (JWT, rate limiting, auditorÃ­a). El 2FA agregarÃ­a complejidad significativa para un beneficio marginal en este contexto empresarial controlado.</p>
                    <p><strong>Tiempo estimado:</strong> 6-8 dÃ­as | <strong>Beneficio:</strong> Medio (seguridad adicional pero overkill para el uso actual)</p>
                </div>
            </div>

            <h3>ğŸ­ MÃ³dulo de Roles - Funcionalidades Adicionales</h3>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ”„ Roles Temporales</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> Los roles temporales complicarÃ­an significativamente la lÃ³gica de permisos y auditorÃ­a. En un entorno empresarial, los cambios de roles deben ser deliberados y auditables.</p>
                    <p><strong>Tiempo estimado:</strong> 3-4 dÃ­as | <strong>Beneficio:</strong> Bajo (pocos casos de uso reales)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ¯ Permisos Contextuales</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> Los permisos ya son contextuales por organizaciÃ³n y tienda. Permisos mÃ¡s granulares aumentarÃ­an la complejidad de mantenimiento sin beneficio proporcional.</p>
                    <p><strong>Tiempo estimado:</strong> 5-6 dÃ­as | <strong>Beneficio:</strong> Medio (mejora granularidad pero aumenta complejidad)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ“Š Dashboard de Roles</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> La gestiÃ³n de roles se realiza principalmente por administradores tÃ©cnicos. Un dashboard visual agregarÃ­a UI complejidad sin mejorar significativamente la funcionalidad core.</p>
                    <p><strong>Tiempo estimado:</strong> 4-5 dÃ­as | <strong>Beneficio:</strong> Bajo (mejora UX pero no funcionalidad crÃ­tica)</p>
                </div>
            </div>

            <h3>ğŸ“Š MÃ³dulo de AuditorÃ­a - Funcionalidades Adicionales</h3>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ“ˆ Reportes Avanzados</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> Los logs actuales ya proporcionan toda la informaciÃ³n necesaria para compliance y debugging. Reportes avanzados con grÃ¡ficos complicarÃ­an el sistema sin agregar valor sustancial.</p>
                    <p><strong>Tiempo estimado:</strong> 6-8 dÃ­as | <strong>Beneficio:</strong> Medio (mejora visualizaciÃ³n pero datos ya estÃ¡n disponibles)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸš¨ Alertas en Tiempo Real</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> El sistema actual registra todos los eventos. Las alertas en tiempo real requerirÃ­an infraestructura adicional (WebSockets, notificaciones push) que no justifica el costo para el uso actual.</p>
                    <p><strong>Tiempo estimado:</strong> 5-7 dÃ­as | <strong>Beneficio:</strong> Medio (mejora responsiveness pero aumenta complejidad)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ” BÃºsqueda Avanzada con Filtros</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> La bÃºsqueda actual ya soporta filtros por usuario, fecha, recurso y acciÃ³n. Filtros mÃ¡s avanzados complicarÃ­an la interfaz sin mejorar significativamente la usabilidad.</p>
                    <p><strong>Tiempo estimado:</strong> 3-4 dÃ­as | <strong>Beneficio:</strong> Bajo (funcionalidad actual es suficiente)</p>
                </div>
            </div>

            <h3>ğŸ¢ MÃ³dulo de Organizaciones - Funcionalidades Adicionales</h3>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸŒ Multiples Dominios por OrganizaciÃ³n</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> Un dominio por organizaciÃ³n es suficiente para el 95% de los casos de uso. MÃºltiples dominios complicarÃ­an la configuraciÃ³n DNS y SSL sin beneficio proporcional.</p>
                    <p><strong>Tiempo estimado:</strong> 4-5 dÃ­as | <strong>Beneficio:</strong> Bajo (pocos casos requieren mÃºltiples dominios)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ¨ Themes Personalizados Avanzados</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> El branding actual (colores, logo, nombre) cubre las necesidades de personalizaciÃ³n. Themes mÃ¡s avanzados aumentarÃ­an significativamente la complejidad del frontend.</p>
                    <p><strong>Tiempo estimado:</strong> 7-10 dÃ­as | <strong>Beneficio:</strong> Medio (mejora apariencia pero no funcionalidad)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ“Š Analytics por OrganizaciÃ³n</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> Los analytics requieren integraciÃ³n con servicios externos y complicarÃ­an la arquitectura. Los datos actuales de auditorÃ­a ya proporcionan mÃ©tricas bÃ¡sicas suficientes.</p>
                    <p><strong>Tiempo estimado:</strong> 8-10 dÃ­as | <strong>Beneficio:</strong> Medio (Ãºtil pero requiere infraestructura adicional)</p>
                </div>
            </div>

            <h3>ğŸª MÃ³dulo de Tiendas - Funcionalidades Adicionales</h3>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ“ GeolocalizaciÃ³n de Tiendas</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> La direcciÃ³n fÃ­sica ya estÃ¡ almacenada. La geolocalizaciÃ³n requiere integraciÃ³n con APIs externas y complicarÃ­a el modelo de datos sin beneficio inmediato.</p>
                    <p><strong>Tiempo estimado:</strong> 3-4 dÃ­as | <strong>Beneficio:</strong> Bajo (direcciÃ³n fÃ­sica es suficiente)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ• Horarios DinÃ¡micos</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> Los horarios fijos cubren la mayorÃ­a de los casos. Horarios dinÃ¡micos por dÃ­a complicarÃ­an innecesariamente la lÃ³gica de negocio y la interfaz de usuario.</p>
                    <p><strong>Tiempo estimado:</strong> 4-5 dÃ­as | <strong>Beneficio:</strong> Medio (Ãºtil para algunos casos pero overkill general)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ“Š MÃ©tricas por Tienda</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> Las mÃ©tricas requieren integraciÃ³n con sistemas de ventas/operaciones que no estÃ¡n en el scope actual. Los datos de auditorÃ­a ya proporcionan informaciÃ³n bÃ¡sica.</p>
                    <p><strong>Tiempo estimado:</strong> 6-8 dÃ­as | <strong>Beneficio:</strong> Alto (pero requiere integraciÃ³n con otros sistemas)</p>
                </div>
            </div>

            <h3>ğŸ” Sistema de AutenticaciÃ³n - Funcionalidades Adicionales</h3>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ”„ Magic Link Authentication</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> El login tradicional con email/password es mÃ¡s familiar para usuarios empresariales. Magic links agregan complejidad al flujo de autenticaciÃ³n sin beneficio significativo.</p>
                    <p><strong>Tiempo estimado:</strong> 3-4 dÃ­as | <strong>Beneficio:</strong> Bajo (no mejora significativamente la UX)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ“± Mobile App Authentication</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> No hay requerimiento actual de aplicaciÃ³n mÃ³vil. La API REST ya soporta todos los casos de uso necesarios para aplicaciones web y potenciales integraciones mÃ³viles.</p>
                    <p><strong>Tiempo estimado:</strong> 5-7 dÃ­as | <strong>Beneficio:</strong> N/A (no hay requerimiento mÃ³vil)</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ” Biometric Authentication</h4>
                    <p><strong>Estado:</strong> <span class="warning">No Implementado</span></p>
                    <p><strong>Motivo:</strong> La biometrÃ­a requiere soporte nativo del dispositivo y complicarÃ­a significativamente la implementaciÃ³n multiplataforma. No es necesaria para el contexto empresarial actual.</p>
                    <p><strong>Tiempo estimado:</strong> 8-10 dÃ­as | <strong>Beneficio:</strong> Bajo (tecnologÃ­a compleja para beneficio marginal)</p>
                </div>
            </div>

            <h3>ğŸ“‹ Consideraciones Generales de PriorizaciÃ³n</h3>

            <div class="highlight">
                <h4>âš–ï¸ RelaciÃ³n Tiempo vs Beneficio</h4>
                <p>Muchas de las funcionalidades listadas arriba, aunque Ãºtiles en teorÃ­a, no fueron implementadas porque:</p>
                <ul>
                    <li><strong>Tiempo de Desarrollo Extenso:</strong> Algunas features requieren 5-10 dÃ­as de desarrollo para un beneficio marginal</li>
                    <li><strong>Complejidad TÃ©cnica:</strong> Aumentan significativamente la complejidad del sistema sin mejorar la funcionalidad core</li>
                    <li><strong>Bajo Retorno de InversiÃ³n:</strong> El beneficio no justifica el costo de desarrollo y mantenimiento</li>
                    <li><strong>Falta de Urgencia:</strong> No son requerimientos inmediatos del negocio</li>
                    <li><strong>Principio KISS:</strong> "Keep It Simple, Stupid" - el sistema actual es funcional y mantenible</li>
                </ul>
            </div>

            <div class="highlight">
                <h4>ğŸ¯ Enfoque MVP (Minimum Viable Product)</h4>
                <p>El sistema se desarrollÃ³ siguiendo la filosofÃ­a MVP:</p>
                <ul>
                    <li><strong>Funcionalidades Core:</strong> âœ… Implementadas (autenticaciÃ³n, usuarios, roles, auditorÃ­a)</li>
                    <li><strong>Escalabilidad:</strong> âœ… Arquitectura preparada para crecimiento</li>
                    <li><strong>Mantenibilidad:</strong> âœ… CÃ³digo limpio y bien documentado</li>
                    <li><strong>Seguridad:</strong> âœ… MÃºltiples capas de protecciÃ³n</li>
                    <li><strong>Performance:</strong> âœ… Optimizado para el uso actual</li>
                </ul>
            </div>

            <h3>ğŸš€ Roadmap de Implementaciones Futuras</h3>

            <p>Las siguientes funcionalidades podrÃ­an implementarse en futuras versiones si surge la necesidad real:</p>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>ğŸ“Š Analytics Avanzados</h4>
                    <p><strong>Prioridad:</strong> Media | <strong>CuÃ¡ndo:</strong> Si se requiere reporting avanzado</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ“± 2FA</h4>
                    <p><strong>Prioridad:</strong> Alta | <strong>CuÃ¡ndo:</strong> Si aumenta la criticidad de seguridad</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ”„ IntegraciÃ³n con Redes Sociales</h4>
                    <p><strong>Prioridad:</strong> Baja | <strong>CuÃ¡ndo:</strong> Si cambia el segmento de usuarios</p>
                </div>

                <div class="feature-item">
                    <h4>ğŸ“Š MÃ©tricas por Tienda</h4>
                    <p><strong>Prioridad:</strong> Alta | <strong>CuÃ¡ndo:</strong> Si se integra con sistemas de ventas</p>
                </div>
            </div>

            <div class="highlight">
                <h4>ğŸ’¡ ConclusiÃ³n</h4>
                <p>El sistema VENDIX estÃ¡ diseÃ±ado para ser <strong>funcional, seguro y mantenible</strong>. Las funcionalidades no implementadas fueron deliberadamente excluidas para mantener el foco en el core business y evitar la <strong>complejidad innecesaria</strong>. El sistema actual cubre el 100% de los requerimientos identificados y estÃ¡ preparado para extensiones futuras cuando sea necesario.</p>
            </div>
        </div>

        <div class="footer">
            <h3>ğŸ“‹ InformaciÃ³n del Sistema</h3>
            <p><strong>VersiÃ³n:</strong> 1.0.0</p>
            <p><strong>Fecha de DocumentaciÃ³n:</strong> Septiembre 2025</p>
            <p><strong>TecnologÃ­as:</strong> NestJS, TypeScript, PostgreSQL, Prisma, Redis</p>
            <p><strong>Arquitectura:</strong> Microservicios Multi-tenant</p>
            <p><strong>Estado:</strong> <span class="success">âœ… ProducciÃ³n Ready</span></p>
            <br>
            <p><em>DocumentaciÃ³n generada automÃ¡ticamente - VENDIX Backend System</em></p>
        </div>
    </div>
</body>
</html>
