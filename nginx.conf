# Usuario bajo el cual corre Nginx
user  nginx;

# Número de procesos worker (auto para automático)
worker_processes  auto;

# Archivo de log de errores y nivel de logging
error_log  /var/log/nginx/error.log warn;

# Archivo donde se guarda el PID del proceso principal
pid        /var/run/nginx.pid;

# Bloque de configuración de eventos (manejo de conexiones)
events { worker_connections  1024; }

# Bloque HTTP: configuración global para el protocolo HTTP
http {
    # Incluir tipos MIME para servir archivos correctamente
    include       /etc/nginx/mime.types;

    # Tipo MIME por defecto si no se reconoce
    default_type  application/octet-stream;

    # Optimizaciones de envío de archivos
    sendfile        on;
    tcp_nopush      on;
    tcp_nodelay     on;

    # Timeout para conexiones keep-alive
    keepalive_timeout  65;

    # Tamaño máximo de la tabla hash de tipos
    types_hash_max_size 2048;

    # Bloque de servidor: define cómo manejar las solicitudes
    server {
        # Escuchar en el puerto 80 (HTTP)
        listen 80;

        # Nombre del servidor ( _ significa cualquier nombre)
        server_name _;

        # Ubicaciones para páginas estáticas de marcas

        # Redirigir /apple a /apple/ con código 301 (redirección permanente)
        location = /apple {
            return 301 /apple/;
        }

        # Servir archivos desde /usr/share/nginx/html/pages para /apple/
        location /apple/ {
            root /usr/share/nginx/html/pages;
            index index.html;
        }

        # Redirigir /nike a /nike/
        location = /nike {
            return 301 /nike/;
        }

        # Servir archivos para /nike/
        location /nike/ {
            root /usr/share/nginx/html/pages;
            index index.html;
        }

        # Redirigir /cocacola a /cocacola/
        location = /cocacola {
            return 301 /cocacola/;
        }

        # Servir archivos para /cocacola/
        location /cocacola/ {
            root /usr/share/nginx/html/pages;
            index index.html;
        }

        # Para cualquier otra ruta, devolver 404
        location / {
            return 404 "Not Found";
        }
    }
}